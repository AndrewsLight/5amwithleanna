<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Anime Party â€” Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <style>
    :root {
      --bg:#0d0d0f; --surface:#121216; --panel:#17171c;
      --border:#252531; --text:#ffffff; --muted:#b3b3bd;
      --accent:#ff4fd8; --accent-2:#7c3aed;
    }
    *{box-sizing:border-box;}
    body {
      margin:0; font-family:"Poppins",system-ui;
      background: radial-gradient(1000px 600px at 20% -10%, #1c1030 0%, var(--bg) 45%, var(--bg) 100%);
      color:var(--text);
    }

    /* Header */
    .site-header {
      position:sticky; top:0; z-index:50;
      background:linear-gradient(90deg,var(--panel),#1b1b21);
      border-bottom:1px solid var(--border);
      padding:14px 22px; display:flex; justify-content:space-between; align-items:center;
      animation:fadeDown .6s ease;
    }
    @keyframes fadeDown { from{opacity:0; transform:translateY(-20px);} to{opacity:1; transform:translateY(0);} }
    .brand-wrap{display:flex;align-items:center;gap:12px;}
    .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#2a2a34,#1e1e26);}
    .brand{display:grid;line-height:1.1;}
    .brand .title{font-weight:800;}
    .brand .tag{color:var(--muted);font-size:.9rem;}
    .nav{display:flex;gap:16px;}
    .nav a{color:var(--muted);text-decoration:none;font-weight:600;padding:8px 10px;border-radius:8px;transition:.2s;}
    .nav a:hover{color:var(--accent);background:rgba(255,79,216,.08);}
    .nav .active{color:var(--accent);background:rgba(255,79,216,.08);}

    /* Layout */
    .container{max-width:900px;margin:26px auto;padding:0 16px;}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:16px;margin-top:16px;box-shadow:0 12px 40px rgba(0,0,0,.35);animation:fadeUp .6s ease;}
    @keyframes fadeUp { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }
    .card h3{margin:0 0 10px;}
    .row{display:flex;gap:10px;flex-wrap:wrap;}
    .input{flex:1;padding:12px;border-radius:10px;border:1px solid var(--border);background:#101014;color:var(--text);}
    .btn{padding:12px 16px;border:none;border-radius:10px;font-weight:700;color:#fff;background:var(--accent);cursor:pointer;transition:.2s;}
    .btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,79,216,.25);}
    .btn.secondary{background:#2a2a32;}
    .btn.ghost{background:transparent;border:1px solid var(--border);color:var(--muted);}
    .status{color:var(--muted);font-size:.9rem;margin-top:8px;min-height:20px;}
    .hidden{display:none!important;}
    @media(max-width:600px){.row{flex-direction:column;} .btn{width:100%;}}

    /* Animations for status */
    .toast{position:fixed;bottom:20px;right:20px;background:var(--accent-2);color:#fff;padding:12px 18px;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,.4);opacity:0;transform:translateY(20px);transition:.4s;}
    .toast.show{opacity:1;transform:translateY(0);}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="brand-wrap">
      <div class="logo"></div>
      <div class="brand">
        <span class="title">Anime Party</span>
        <span class="tag">Watch together, your way</span>
      </div>
    </div>
    <nav class="nav">
      <a class="active" href="#">Home</a>
      <a href="#">Library</a>
      <a href="#">Profile</a>
    </nav>
  </header>

  <div class="container">
    <!-- Auth -->
    <section class="card" id="cardAuth">
      <h3>Login</h3>
      <div class="row">
        <input id="email" class="input" placeholder="Email" />
        <input id="password" class="input" type="password" placeholder="Password" />
      </div>
      <div class="row" style="margin-top:10px;">
        <button class="btn" id="btnSignup">Sign up</button>
        <button class="btn secondary" id="btnLogin">Login</button>
        <button class="btn ghost" id="btnAnon">Anonymous</button>
      </div>
      <div id="loginStatus" class="status">Not logged in</div>
    </section>

    <!-- Profile -->
    <section class="card" id="cardProfile">
      <h3>Profile</h3>
      <div class="row">
        <input id="displayName" class="input" placeholder="Your display name" />
        <button class="btn" id="btnSaveName">Save</button>
      </div>
      <div id="profileStatus" class="status">No display name set</div>
    </section>

    <!-- Rooms (gated) -->
    <section class="card hidden" id="cardRooms">
      <h3>Rooms</h3>
      <div class="row">
        <button class="btn" id="btnCreate">Create Room</button>
      </div>
      <div class="row" style="margin-top:10px;">
        <input id="roomIdJoin" class="input" placeholder="Room ID" />
        <button class="btn secondary" id="btnJoin">Join Room</button>
      </div>
      <div id="roomsStatus" class="status"></div>
    </section>
  </div>

  <div class="toast" id="toast"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signInAnonymously, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "5amwithleanna.online",
      databaseURL: "https://anime-party-ab793-default-rtdb.firebaseio.com",
      projectId: "anime-party-ab793",
      storageBucket: "anime-party-ab793.firebasestorage.app",
      messagingSenderId: "220188656976",
      appId: "1:220188656976:web:a699a028f1e9cd8bcdd855"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    const cardRooms = document.getElementById("cardRooms");
    const loginStatus = document.getElementById("loginStatus");
    const profileStatus = document.getElementById("profileStatus");
    const roomsStatus = document.getElementById("roomsStatus");
    const toast = document.getElementById("toast");

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"),3000);
    }

    function updateGate(){
      const user = auth.currentUser;
      if(user && user.displayName){
        cardRooms.classList.remove("hidden");
        roomsStatus.textContent = "Ready. Create or join a room.";
      } else {
        cardRooms.classList.add("hidden");
        roomsStatus.textContent = "Login and set display name first.";
      }
    }

    document.getElementById("btnSignup").
